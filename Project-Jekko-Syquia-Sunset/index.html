<html>
<head>
	<title> Jekko Syquia Sunset </title> 
	<script src="./js/build/three.js"></script>
	<link rel="stylesheet" type="text/css" href="style/style.css">
</head>
<body>
	<canvas id="sunSetCanvas"></canvas>
	<script type="module">
		import Stats from './js/libs/stats.module.js';
		import {OrbitControls} from './js/controls/OrbitControls.js';
		import {GLTFLoader} from './js/loaders/GLTFLoader.js';
		import {DRACOLoader} from './js/loaders/DRACOLoader.js';
		var renderer,
			stats,
			mixer;

        //Scene declarations 
		var pointLight, 
			clock,
			scene;

		//Camera declarations 
		var	controls,
            camera; 

        //Object declarations
        var geometry, 
            boxMaterial, 
            cube;
        
        //Initialize Renderer
    	renderer = new THREE.WebGLRenderer({canvas: document.getElementById('sunSetCanvas'), antialias: true});
		renderer.setClearColor(0x5cb0ff);
		renderer.setPixelRatio(window.devicePixelRatio/2);
		//renderer.setSize(window.innerWidth, window.innerHeight);
		renderer.setSize(window.innerWidth, window.innerHeight);
        
		//Initialize Scene
		stats = new Stats();
		scene = new THREE.Scene();
		camera = new THREE.PerspectiveCamera(37.8, window.innerWidth/window.innerHeight, 1, 1000);
		camera.position.set(4,2,-2);
		
		clock = new THREE.Clock();
		var directionalLight = new THREE.DirectionalLight(0xffffff, 1);
		scene.add(directionalLight);

		var hemilight = new THREE.HemisphereLight(0x0404040, 0x0404040, 1);
		scene.add(hemilight);
		var light = new THREE.PointLight (0xff0000, 1, 100);
		light.position.set(50, 50, 50);
		scene.add(light);
		/*
		pointLight = new THREE.PointLight(0xffffff, 1);
		pointLight.position.set(5, 0, 0);
		//pointLight.position.copy(camera.position);
		scene.add(new THREE.AmbientLight(0x404040, 1));
		scene.add(pointLight);
		*/

		controls = new OrbitControls( camera, renderer.domElement );
		controls.target.set( 0, 0.5, 0 );
		controls.enablePan = false;
		


		
		//Initialize Ground
		var path = 'textures/cube/Park2/';
			var format = '.jpg';
			var envMap = new THREE.CubeTextureLoader().load( [
				path + 'posx' + format, path + 'negx' + format,
				path + 'posy' + format, path + 'negy' + format,
				path + 'posz' + format, path + 'negz' + format
			] );

		var dracoLoader = new DRACOLoader();
			dracoLoader.setDecoderPath( 'js/libs/draco/gltf/' );

			var loader = new GLTFLoader();
			loader.setDRACOLoader( dracoLoader );
			loader.load( 'model/WashingtonCircleAnimation.glb', function ( gltf ) {

				var model = gltf.scene;
				model.position.set( 5, 0, 0 );
				model.scale.set( 1, 1, 1);
				model.castShadow = true;
				model.traverse( function ( child ) {

					if ( child.isMesh ) child.material.envMap = envMap;

				} );

				scene.add( model );

				mixer = new THREE.AnimationMixer( model );
				mixer.clipAction( gltf.animations[ 0 ] ).play();

				animate();

			}, undefined, function ( e ) {

				console.error( e );

			} );


		function animate() {
			requestAnimationFrame(animate);
			var delta = clock.getDelta();
			mixer.update(delta);
			controls.update(delta);
			renderer.render(scene, camera);
        }
		animate();
	</script>
</body>
</html>

